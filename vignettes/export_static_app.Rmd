---
title: "Create a static shiny app"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{export_static_app}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

This vignette demonstrates the creation of Shiny apps using the `OmopViewer` package. We'll use the `omopViewerResults` mock data  from this pacakge for illustration. 
# Loading Necessary Libraries and Data
First, load the required library and see the structure of the sample data:
```{r}
library(OmopViewer)
# Inspect the structure of the sample data
summary(omopViewerResults)
```

# Subsetting the Data
For this example, we'll use a subset of the data containing specific result types:
```{r}
result <- omopViewerResults |>
  omopgenerics::filterSettings(
    result_type %in% c("summarise_omop_snapshot", "summarise_characteristics", "incidence")
  )
```
This filters the `omopViewerResults` data to include only entries where result_type is one of "summarise_omop_snapshot", "summarise_characteristics", or "incidence". 

# Generating the Shiny App

The exportStaticApp function generates a Shiny app from the prepared data. Using the default parameters, it only requires a directory to save the app and the processed data (a <summarised_result> object):

```{r}
exportStaticApp(result = result, directory = tempdir())
```

# Understanding Panel Details

The panels that will be created are defined by the `panelDetails` argument. By default, a tab is created by each `result_type` of the result object. The default tab `getPanel("default")` is used if no tab is defined for that `result_type` in **omopViewerPanels**. Let's see the default `panelDetails`:

```{r}
panelDetails <- panelDetailsFromResult(result)
panelDetails
```

